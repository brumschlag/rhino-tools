<?xml version="1.0" encoding="utf-8" ?>
<Project
	xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

	<PropertyGroup>
		<ProjectName>Rhino.ETL</ProjectName>
		<ShortName>rhino-etl</ShortName>
		<SolutionFile>Rhino.ETL.sln</SolutionFile>
		<FlattenZipFile>True</FlattenZipFile>
		<SectionId>-1</SectionId>
		<Version>0.6</Version>
		<ClsCompliant>false</ClsCompliant>
	</PropertyGroup>
	
	<ItemGroup>
		<AssemblyInfo Include="Item">
			<File>$(MSBuildProjectDirectory)\Rhino.ETL\Properties\AssemblyInfo.cs</File>
		</AssemblyInfo>
		<AssemblyInfo Include="Item">
			<File>$(MSBuildProjectDirectory)\Rhino.ETL.Tests\Properties\AssemblyInfo.cs</File>
		</AssemblyInfo>
		<AssemblyInfo Include="Item">
			<File>$(MSBuildProjectDirectory)\Rhino.ETL.Cmd\Properties\AssemblyInfo.cs</File>
		</AssemblyInfo>
	</ItemGroup>

	<ItemGroup>
		<TestAssembly Include="$(OutDir)\Rhino.ETL.Tests.dll"/>
	</ItemGroup>

  <ItemGroup>
		<ZipFiles Include="$(OutDir)\Rhino.ETL.Cmd.exe"/>
		<ZipFiles Include="$(OutDir)\Rhino.ETL.dll"/>
		<ZipFiles Include="$(OutDir)\Boo.Lang.dll"/>
		<ZipFiles Include="$(OutDir)\Boo.Lang.Parser.dll"/>
		<ZipFiles Include="$(OutDir)\Boo.Lang.Compiler.dll"/>
		<ZipFiles Include="$(OutDir)\log4net.dll"/>
		<ZipFiles Include="$(OutDir)\FileHelpers.dll"/>
	</ItemGroup>
	
	<Target Name="BeforeZip">	
			<ILMerge
				ToolPath="$(SharedLibsDir)\Tools\"
				InputAssemblies="$(OutDir)\Rhino.Etl.Cmd.exe;
				    $(OutDir)\Rhino.ETL.dll;
				    $(OutDir)\log4net.dll;
				    $(OutDir)\FileHelpers.dll;
				    $(OutDir)\Boo.Lang.Parser.dll;
				    $(OutDir)\Boo.Lang.Compiler.dll;
				    $(OutDir)\Boo.Lang.dll;"
        ExcludeFile="$(MSBuildProjectDirectory)\ilmerge.exclude"
        OutputFile="$(OutDir)\RunEtl.exe"
        LogFile="$(logFile)"
        DebugInfo="true"
        XmlDocumentation="true"
        KeyFile="$(SharedLibsDir)\..\ayende-open-source.snk"
        />
	</Target>
	
	<Import Project="$(MSBuildProjectDirectory)\..\Common.build.xml"/>
</Project>